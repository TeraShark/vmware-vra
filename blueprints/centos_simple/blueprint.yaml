name: CentOS-Simple
version: 1
formatVersion: 1
inputs:
  vm_memory:
    type: integer
    title: Memory
    default: '1024'
    maximum: 8192
    minimum: 512
    enum:
      - 8192
      - 4096
      - 2048
      - 1024
resources:
  anisble_1:
    type: Cloud.Ansible
    properties:
      host: '${resource.dev_svr.*}'
      osType: linux
      account: ansible
      username: root
      password: VMware1!
      playbooks:
        provision:
          - /etc/ansible/default.yml
      hostVariables: |
        target_host: localhost
        project: ${env.projectName}
  dev_svr:
    type: Cloud.vSphere.Machine
    properties:
      image: centos
      cpuCount: 1
      totalMemoryMB: '${input.vm_memory}'
      networks:
        - network: '${resource.NSX_Default.id}'
      attachedDisks:
        - source: ''
      customProperty1: 'foo'
      customProperty2: 'bar'
  NSX_Default:
    type: Cloud.NSX.Network
    properties:
      networkType: existing
  